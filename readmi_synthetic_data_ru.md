# Генерация синтетического датасета: методология и обоснование

## Введение

Создание синтетических датасетов — важный этап современной биомедицинской аналитики, особенно при работе с дисбалансом классов, ограниченным количеством наблюдений или необходимостью валидации моделей. В данном проекте синтетические данные используются для дополнения и расширения исходного клинико-морфологического набора, что позволяет более надёжно проводить стратификацию рисков и прогнозировать неблагоприятные сердечно-сосудистые события.

## Источники данных и структура

Исходный датасет включает клинические и морфологические признаки, собранные у пациентов при коронарном обследовании. Ключевые признаки: демографические (возраст, пол), клиническая история (диабет, гипертония) и характеристики бляшек (объём, стабильность, syntax score). Синтетический датасет формируется на основе этой структуры, с сохранением связей между признаками и статистических свойств.

### Числовые характеристики и статистика

Исходный датасет для моделирования (`features.csv`) содержит 56 наблюдений и 15 признаков. Целевая переменная сильно дисбалансирована:

- **Исходное распределение классов:**
  - Класс 0.0: 51 наблюдение
  - Класс 1.0: 5 наблюдений

После применения SMOTENC с `sampling_strategy='auto'` синтетический датасет содержит 102 наблюдения (51 реальное + 51 синтетическое), достигается идеальный баланс классов:

- **Распределение классов после ресемплирования:**
  - Класс 0.0: 51 наблюдение
  - Класс 1.0: 51 наблюдение

**Размер матрицы признаков:**
  - Исходная: (56, 15)
  - Ресемплированная: (102, 15)

**Использованный метод:**
  - SMOTENC (categorical_features=[0], стратегия='auto')

**Параметры экспорта:**
  - Режим: new (сохраняются только синтетические наблюдения)
  - Файл: `backend/data/resampled_data_smote.csv`
  - Числовые значения округляются до 2 знаков

**Сводка логов:**
  - Данные загружены из backend/data/features.csv
  - Признаки и целевая переменная извлечены. Размер признаков: (56, 15), размер целевой: (56,)
  - SMOTENC инициализирован с categorical_features=[0] и sampling_strategy='auto'
  - Исходное распределение классов: {0.0: 51, 1.0: 5}
  - Данные ресемплированы методом smote-sampling. Размер ресемплированных данных: (102, 15), (102,). Новое распределение классов: {0.0: 51, 1.0: 51}
  - Самплер не предоставляет sample_indices_. Экспортируются все ресемплированные данные.
  - Данные экспортированы в 'backend/data/resampled_data_smote.csv', режим=new, include_index=False
  - Процесс семплирования завершён методом 'smote' со стратегией 'auto'

## Логика генерации синтетических данных

### Режимы семплирования

Реализовано два основных режима:

- **Append**: синтетические наблюдения дополняют исходные, итоговый датасет содержит реальные и синтетические данные. Используется для балансировки классов или увеличения объёма выборки без исключения оригинальных данных.
- **New**: сохраняются только синтетические наблюдения, все реальные исключаются. Подходит для валидации моделей, анализа с сохранением приватности или изучения свойств чисто синтетических популяций.

### Методы семплирования

- **RandomUnderSampler**: уменьшает объём большинства класса путём случайного удаления наблюдений.
- **RandomOverSampler**: увеличивает объём меньшинства путём случайного дублирования наблюдений.
- **SMOTE**: генерирует новые синтетические наблюдения путём интерполяции между существующими наблюдениями меньшинства.
- **SMOTENC**: расширяет SMOTE для работы с категориальными признаками, интерполируя только непрерывные признаки.
- **ADASYN**: аналог SMOTE, но фокусируется на генерации синтетических наблюдений для сложных примеров меньшинства.

Метод выбирается в зависимости от задачи и структуры данных.

## Реализация

Процесс генерации синтетических данных реализован в классе `DataSampling`, который обеспечивает:

- Гибкий выбор метода и стратегии семплирования
- Выбор режима (`append` или `new`)
- Экспорт синтетических данных в CSV с округлением числовых признаков
- Визуализацию распределения классов до и после семплирования
- Сравнительные графики распределения признаков между реальными и синтетическими данными

### Пример рабочего процесса

1. **Инициализация**: загрузка исходного датасета и выбор целевых признаков
2. **Настройка самплера**: выбор метода и режима
3. **Ресемплирование**: генерация синтетических данных
4. **Экспорт**: сохранение итогового датасета в CSV с округлением до двух знаков
5. **Визуализация**: построение графиков для анализа баланса классов и распределения признаков

## Визуализация и интерпретация

Для интерпретации результатов строятся:

- **Круговые диаграммы распределения классов**: показывают баланс целевой переменной до и после семплирования
  
  *[Здесь можно вставить изображения круговых диаграмм]*

- **Сравнительные гистограммы признаков**: наложенные гистограммы для выбранных признаков (например, age, cholesterol_level, syntax_score, angina_functional_class), сравнивающие реальные и синтетические данные
  
  *[Здесь можно вставить изображения сравнительных гистограмм]*

Эти визуализации позволяют оценить качество синтетических данных и влияние выбранной стратегии семплирования.

## Кастомизация и расширяемость

- Список признаков для сравнительных графиков можно настраивать
- Стратегии семплирования адаптируются под исследовательские задачи
- Округление числовых признаков регулируется параметрами экспорта

## Заключение

Генерация синтетических данных, реализованная в данном проекте, обеспечивает надёжный инструмент для балансировки классов, расширения малых выборок и анализа с сохранением приватности. Гибкие режимы и методы позволяют адаптировать процесс под конкретные задачи, а визуализация поддерживает прозрачную оценку качества синтетических данных.

---

*Для подробностей см. документацию кода и сгенерированные графики. Замените указанные выше места на реальные изображения для публикации или отчёта.*
